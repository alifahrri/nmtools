<!doctype html>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<html>
  <div id="log"></div>
  <script src="ufuncs.js"></script>
  <script>
    Module.onRuntimeInitialized = _ => {
      // TODO: maybe create class with convinience constructor
      var a = new Object();
      a.data = new Int32Array([1,2,3,4,5,6,7,8,9,10,11,12]);
      a.shape = new Int32Array([2,3,2]);
      var b = new Object();
      b.data = new Int32Array([2,3]);
      b.shape = new Int32Array([2,1,1]);
      var c = new Object();
      c.data = new Int32Array([5]);
      c.shape = new Int32Array([1]);

      // use stringify to prettier print
      const exp_result = JSON.stringify(Module.exp_i32(a));
      const add_result = JSON.stringify(Module.add_i32(a,b));
      const clip_result = JSON.stringify(Module.clip_i32(a,b,c));
      document.getElementById('log').innerHTML += ('exp result: ' + exp_result + '\n');
      document.getElementById('log').innerHTML += ('add result: ' + add_result + '\n');
      document.getElementById('log').innerHTML += ('clip result: ' + clip_result + '\n');
    };
  </script>
</html>